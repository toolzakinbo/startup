<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="userprofile.css">
</head>

<body>
    <header>
        <nav>
            <ul>
              <li><a href="index.html">Home</a></li>
                <li><a href="recreview.html">Recipe Reviews</a></li>
                <li><a href="recupload.html">Upload Recipe</a></li>
            </ul>
        </nav>
    </header>

    <h1>User Profile</h1>


    <section id="user-info">
        <h2>User Information</h2>
        <!-- Placeholder for database data showing user info-->

    </section>

    <section id="liked-recipes">
        <h2>Liked Recipes</h2>
        <!-- Placeholder for database data showing liked recipes -->
        NO LIKED RECIPES YET
    </section>

    <section id="user-comments">
        <h2>User Comments</h2>
        <!--Placeholder for database data showing user comments-->
        <ul>
            <li>
                <h3>Comment on Banana French Toast</h3>
                <p>Comment text...</p>
            </li>
            <li>
                <h3>Comment on Butter Chicken Curry</h3>
                <p>Comment text...</p>
            </li>
            
        </ul>
    </section>
    <!--Placeholder for websocket data showing real-time communication-->
    <section id="real-time-updates">
        <h2>Real-Time Updates</h2>
        <p id="websocket-data">Waiting for real-time data...</p>
    </section>


    <script>
        // Your JavaScript code to fetch and display user profile information
        async function fetchUserProfile() {
          const response = await fetch('/api/user');
          if (!response.ok) {
            throw new Error('Failed to fetch user profile');
          }
          const userProfile = await response.json();
          return userProfile;
        }
    
        async function displayUserProfile() {
          const userInfoSection = document.getElementById("user-info");
          try {
            const userProfile = await fetchUserProfile();
            userInfoSection.innerHTML = `<p>Welcome, ${userProfile.username}!</p>`;
          } catch (error) {
            userInfoSection.innerHTML = "Error fetching user profile";
            console.error('Error fetching user profile:', error);
          }
        }
    
        document.addEventListener("DOMContentLoaded", () => {
          displayUserProfile();
        });
      </script>
</body>

</html>
